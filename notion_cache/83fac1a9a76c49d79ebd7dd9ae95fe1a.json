{
  "ID": "83fac1a9-a76c-49d7-9ebd-7dd9ae95fe1a",
  "Page": {
    "alive": true,
    "content": [
      "a5061302-2e67-486a-b9b2-2a40413ab861",
      "5bc727f3-169f-4c90-80e4-1bd7c7e0452d",
      "466057b3-169b-4058-bd95-23331ed7d6c9",
      "8c01b6ea-940f-4d96-9f05-dc39706ffe28",
      "8a180557-d2c5-4859-8871-88f49933e7a8",
      "fc00cdab-c10e-4cc8-be47-4314ecd9e0f5",
      "150c3e9f-5306-49da-8b16-b461630ba1a5",
      "e25df6c9-dc5f-4f9d-bd00-c9003ee46f6d",
      "b44545ab-c3f5-4782-b355-de9d7e497e18",
      "a96709c6-9baa-48c6-b255-5f674698c9f8",
      "034e8e6f-c8a9-462f-99fd-8dae31a45a0f",
      "a5b371a1-6df3-4646-a00c-18abe043f78d",
      "9923f4a8-3eb6-4978-a7e8-50cfd4704091",
      "899aa6a1-da04-4116-a490-81e6dfdc7900",
      "87ffcaae-fa4d-494b-b6ae-6f7313956620",
      "b19ea8da-334b-4180-8cdb-067b35799625",
      "310dd227-3470-4e51-a2e9-143f17bec43f",
      "72049c5d-8c56-4cf8-a33b-1d4374aaef29",
      "1a5fb262-84c0-4204-86b7-a8cd8ca3a7f6",
      "617b66c7-4d6f-4dc7-8b1b-e5fe7961f862",
      "1e702895-b347-414f-8a0a-aaa7c45239b4",
      "93dd67dd-6531-4326-a729-dfd8b745f137",
      "ebb4fc65-859b-4337-89aa-4affca0c027c",
      "078dab9e-b1fd-41f2-9e9f-2d61f0bb19d3",
      "12a9db9e-9399-4a5f-aa62-0855f1021705",
      "b11cf587-8c55-44f0-a14a-6cb21d155017",
      "e84acef4-56c1-4fa8-a0bc-df8bc1798029",
      "f9eb2a82-fe74-4f7a-96aa-2a11d50ebd60",
      "e20b7316-de03-42e6-93de-73164b35f5ca",
      "60da5096-ea3f-477d-9491-b5372ef21a50",
      "451f82cc-c5ae-4283-835b-e5bba2628869",
      "aad85cc4-a8b8-48de-a31a-7b9b2e53cc79",
      "ca906ecd-7a9e-4c7d-b646-b35ef294e51d",
      "a1a9307d-3fa2-423d-84bf-2b14a516b82b",
      "23689855-520c-4396-ab58-8cc3268ec0c1",
      "bee2783f-2266-4005-acbe-cf9772c58daa",
      "b4b5a229-6a85-48a4-a508-db29e80cbce2",
      "a9c02a27-bbbe-47ac-baab-f1af0cfdb615"
    ],
    "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
    "created_time": 1531203515165,
    "format": {
      "page_full_width": true,
      "page_small_text": true
    },
    "id": "83fac1a9-a76c-49d7-9ebd-7dd9ae95fe1a",
    "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
    "last_edited_time": 1531622582674,
    "parent_id": "300db9dc-27c8-4958-a08b-8d0c37f4cfe5",
    "parent_table": "block",
    "properties": {
      "title": [
        [
          "Accessing GitHub API from Go"
        ]
      ]
    },
    "type": "page",
    "version": 9,
    "content_resolved": [
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1531203515165,
        "id": "a5061302-2e67-486a-b9b2-2a40413ab861",
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1531622583963,
        "parent_id": "83fac1a9-a76c-49d7-9ebd-7dd9ae95fe1a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Id: 15"
            ]
          ]
        },
        "type": "text",
        "version": 5,
        "inline_content": [
          {
            "Text": "Id: 15"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1531203515165,
        "id": "5bc727f3-169f-4c90-80e4-1bd7c7e0452d",
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1531622585090,
        "parent_id": "83fac1a9-a76c-49d7-9ebd-7dd9ae95fe1a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Date: 2015-02-12T23:18:58-08:00"
            ]
          ]
        },
        "type": "text",
        "version": 5,
        "inline_content": [
          {
            "Text": "Date: 2015-02-12T23:18:58-08:00"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1531203515166,
        "id": "466057b3-169b-4058-bd95-23331ed7d6c9",
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1531622586058,
        "parent_id": "83fac1a9-a76c-49d7-9ebd-7dd9ae95fe1a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Tags: go, programming"
            ]
          ]
        },
        "type": "text",
        "version": 3,
        "inline_content": [
          {
            "Text": "Tags: go, programming"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1531203515166,
        "id": "8c01b6ea-940f-4d96-9f05-dc39706ffe28",
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1531622588308,
        "parent_id": "83fac1a9-a76c-49d7-9ebd-7dd9ae95fe1a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "HeaderImage: gfx/headers/header-06.jpg "
            ]
          ]
        },
        "type": "text",
        "version": 6,
        "inline_content": [
          {
            "Text": "HeaderImage: gfx/headers/header-06.jpg "
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1531203515166,
        "id": "8a180557-d2c5-4859-8871-88f49933e7a8",
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1531622588308,
        "parent_id": "83fac1a9-a76c-49d7-9ebd-7dd9ae95fe1a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Collection: go-cookbook"
            ]
          ]
        },
        "type": "text",
        "version": 6,
        "inline_content": [
          {
            "Text": "Collection: go-cookbook"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1531203515166,
        "id": "fc00cdab-c10e-4cc8-be47-4314ecd9e0f5",
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1531622570890,
        "parent_id": "83fac1a9-a76c-49d7-9ebd-7dd9ae95fe1a",
        "parent_table": "block",
        "type": "text",
        "version": 3
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1531203515166,
        "id": "150c3e9f-5306-49da-8b16-b461630ba1a5",
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1531203515166,
        "parent_id": "83fac1a9-a76c-49d7-9ebd-7dd9ae95fe1a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "To use GitHub API from Go you can use "
            ],
            [
              "github.com/google/go-github",
              [
                [
                  "a",
                  "http://github.com/google/go-github"
                ]
              ]
            ],
            [
              " package. GitHub, like many other sites, uses OAuth 2.0 protocol for authentication. There are few packages for Go that implement OAuth. This article describes how to use "
            ],
            [
              "golang.org/x/oauth2",
              [
                [
                  "a",
                  "http://golang.org/x/oauth2"
                ]
              ]
            ],
            [
              " package. If you prefer to read code, read "
            ],
            [
              "this sample",
              [
                [
                  "a",
                  "https://github.com/kjk/kjkpub/blob/master/go/github_sample/sample_1.go"
                ]
              ]
            ],
            [
              "."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "To use GitHub API from Go you can use "
          },
          {
            "Text": "github.com/google/go-github",
            "Link": "http://github.com/google/go-github"
          },
          {
            "Text": " package. GitHub, like many other sites, uses OAuth 2.0 protocol for authentication. There are few packages for Go that implement OAuth. This article describes how to use "
          },
          {
            "Text": "golang.org/x/oauth2",
            "Link": "http://golang.org/x/oauth2"
          },
          {
            "Text": " package. If you prefer to read code, read "
          },
          {
            "Text": "this sample",
            "Link": "https://github.com/kjk/kjkpub/blob/master/go/github_sample/sample_1.go"
          },
          {
            "Text": "."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1531203515166,
        "id": "e25df6c9-dc5f-4f9d-bd00-c9003ee46f6d",
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1531203515166,
        "parent_id": "83fac1a9-a76c-49d7-9ebd-7dd9ae95fe1a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Short intro to OAuth for GitHub"
            ]
          ]
        },
        "type": "sub_header",
        "version": 1,
        "inline_content": [
          {
            "Text": "Short intro to OAuth for GitHub"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1531203515166,
        "id": "b44545ab-c3f5-4782-b355-de9d7e497e18",
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1531203515166,
        "parent_id": "83fac1a9-a76c-49d7-9ebd-7dd9ae95fe1a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "To access private info about the user via the API in your web app you need to authenticate your app against GitHub website."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "To access private info about the user via the API in your web app you need to authenticate your app against GitHub website."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1531203515166,
        "id": "a96709c6-9baa-48c6-b255-5f674698c9f8",
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1531203515166,
        "parent_id": "83fac1a9-a76c-49d7-9ebd-7dd9ae95fe1a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "First, you need to "
            ],
            [
              "register your application with GitHub",
              [
                [
                  "a",
                  "https://github.com/settings/applications"
                ]
              ]
            ],
            [
              " (under Developer applications). You provide description of the app, including a callback url (we’ll get back to that). GitHub creates client id and client secret that you’ll need to provide to OAuth libraries (and keep them secret)."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "First, you need to "
          },
          {
            "Text": "register your application with GitHub",
            "Link": "https://github.com/settings/applications"
          },
          {
            "Text": " (under Developer applications). You provide description of the app, including a callback url (we’ll get back to that). GitHub creates client id and client secret that you’ll need to provide to OAuth libraries (and keep them secret)."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1531203515166,
        "id": "034e8e6f-c8a9-462f-99fd-8dae31a45a0f",
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1531203515166,
        "parent_id": "83fac1a9-a76c-49d7-9ebd-7dd9ae95fe1a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "The flow of OAuth is:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "The flow of OAuth is:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1531203515166,
        "id": "a5b371a1-6df3-4646-a00c-18abe043f78d",
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1531203515166,
        "parent_id": "83fac1a9-a76c-49d7-9ebd-7dd9ae95fe1a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "the user is on your website and clicks “login with GitHub” link"
            ]
          ]
        },
        "type": "bulleted_list",
        "version": 1,
        "inline_content": [
          {
            "Text": "the user is on your website and clicks “login with GitHub” link"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1531203515166,
        "id": "9923f4a8-3eb6-4978-a7e8-50cfd4704091",
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1531203515166,
        "parent_id": "83fac1a9-a76c-49d7-9ebd-7dd9ae95fe1a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "you redirect the user to GitHub’s authorization page. In that url you specify desired access level and a random secret"
            ]
          ]
        },
        "type": "bulleted_list",
        "version": 1,
        "inline_content": [
          {
            "Text": "you redirect the user to GitHub’s authorization page. In that url you specify desired access level and a random secret"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1531203515166,
        "id": "899aa6a1-da04-4116-a490-81e6dfdc7900",
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1531203515166,
        "parent_id": "83fac1a9-a76c-49d7-9ebd-7dd9ae95fe1a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "the user authorizes your app by clicking on a link"
            ]
          ]
        },
        "type": "bulleted_list",
        "version": 1,
        "inline_content": [
          {
            "Text": "the user authorizes your app by clicking on a link"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1531203515166,
        "id": "87ffcaae-fa4d-494b-b6ae-6f7313956620",
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1531203515166,
        "parent_id": "83fac1a9-a76c-49d7-9ebd-7dd9ae95fe1a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "GitHub redirects to a callback url on your website (which you provided when registering the app with GitHub)"
            ]
          ]
        },
        "type": "bulleted_list",
        "version": 1,
        "inline_content": [
          {
            "Text": "GitHub redirects to a callback url on your website (which you provided when registering the app with GitHub)"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1531203515166,
        "id": "b19ea8da-334b-4180-8cdb-067b35799625",
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1531203515166,
        "parent_id": "83fac1a9-a76c-49d7-9ebd-7dd9ae95fe1a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "in the url handler, extract “secret” and “code” args"
            ]
          ]
        },
        "type": "bulleted_list",
        "version": 1,
        "inline_content": [
          {
            "Text": "in the url handler, extract “secret” and “code” args"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1531203515166,
        "id": "310dd227-3470-4e51-a2e9-143f17bec43f",
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1531203515166,
        "parent_id": "83fac1a9-a76c-49d7-9ebd-7dd9ae95fe1a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "you have to check that the secret is the same as the one you sent to GitHub (security measure that prevents forgery)"
            ]
          ]
        },
        "type": "bulleted_list",
        "version": 1,
        "inline_content": [
          {
            "Text": "you have to check that the secret is the same as the one you sent to GitHub (security measure that prevents forgery)"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1531203515166,
        "id": "72049c5d-8c56-4cf8-a33b-1d4374aaef29",
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1531203515166,
        "parent_id": "83fac1a9-a76c-49d7-9ebd-7dd9ae95fe1a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "you call another GitHub url to exchange code for access token"
            ]
          ]
        },
        "type": "bulleted_list",
        "version": 1,
        "inline_content": [
          {
            "Text": "you call another GitHub url to exchange code for access token"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1531203515166,
        "id": "1a5fb262-84c0-4204-86b7-a8cd8ca3a7f6",
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1531203515166,
        "parent_id": "83fac1a9-a76c-49d7-9ebd-7dd9ae95fe1a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Access token is what you use to authenticate your API calls."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Access token is what you use to authenticate your API calls."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1531203515166,
        "id": "617b66c7-4d6f-4dc7-8b1b-e5fe7961f862",
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1531203515166,
        "parent_id": "83fac1a9-a76c-49d7-9ebd-7dd9ae95fe1a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Notes on callback url"
            ]
          ]
        },
        "type": "sub_header",
        "version": 1,
        "inline_content": [
          {
            "Text": "Notes on callback url"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1531203515166,
        "id": "1e702895-b347-414f-8a0a-aaa7c45239b4",
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1531203515166,
        "parent_id": "83fac1a9-a76c-49d7-9ebd-7dd9ae95fe1a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "You define callback url when you register the app. This is a problem for testing, because your app might use different hosts for development or production. One option is to create different apps for testing and production, with different callback urls. OAuth protocol allows providing callback url as an argument when calling authorization page (and oauth2 library allows setting it as "
            ],
            [
              "oauth2.Config.RedirectURL",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              ") but GitHub "
            ],
            [
              "has restrictions",
              [
                [
                  "a",
                  "https://developer.github.com/v3/oauth/#redirect-urls"
                ]
              ]
            ],
            [
              " and doesn’t allow changing host."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "You define callback url when you register the app. This is a problem for testing, because your app might use different hosts for development or production. One option is to create different apps for testing and production, with different callback urls. OAuth protocol allows providing callback url as an argument when calling authorization page (and oauth2 library allows setting it as "
          },
          {
            "Text": "oauth2.Config.RedirectURL",
            "AttrFlags": 2
          },
          {
            "Text": ") but GitHub "
          },
          {
            "Text": "has restrictions",
            "Link": "https://developer.github.com/v3/oauth/#redirect-urls"
          },
          {
            "Text": " and doesn’t allow changing host."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1531203515166,
        "id": "93dd67dd-6531-4326-a729-dfd8b745f137",
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1531203515166,
        "parent_id": "83fac1a9-a76c-49d7-9ebd-7dd9ae95fe1a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Implementing OAuth using "
            ],
            [
              "golang.org/x/oauth2",
              [
                [
                  "a",
                  "http://golang.org/x/oauth2"
                ]
              ]
            ]
          ]
        },
        "type": "sub_header",
        "version": 1,
        "inline_content": [
          {
            "Text": "Implementing OAuth using "
          },
          {
            "Text": "golang.org/x/oauth2",
            "Link": "http://golang.org/x/oauth2"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1531203515166,
        "id": "ebb4fc65-859b-4337-89aa-4affca0c027c",
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1531203515166,
        "parent_id": "83fac1a9-a76c-49d7-9ebd-7dd9ae95fe1a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Create OAuth config object:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Create OAuth config object:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1531203515166,
        "id": "078dab9e-b1fd-41f2-9e9f-2d61f0bb19d3",
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1531203515166,
        "parent_id": "83fac1a9-a76c-49d7-9ebd-7dd9ae95fe1a",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "import (\n    \"fmt\"\n    \"net/http\"\n\n    \"github.com/google/go-github/github\"\n    \"golang.org/x/oauth2\"\n    githuboauth \"golang.org/x/oauth2/github\"\n)\n\nvar (\n    // You must register the app at https://github.com/settings/applications\n    // Set callback to http://127.0.0.1:7000/github_oauth_cb\n    // Set ClientId and ClientSecret to\n    oauthConf = \u0026oauth2.Config{\n        ClientID:     \"\",\n        ClientSecret: \"\",\n        // select level of access you want https://developer.github.com/v3/oauth/#scopes\n        Scopes:       []string{\"user:email\", \"repo\"},\n        Endpoint:     githuboauth.Endpoint,\n    }\n    // random string for oauth2 API calls to protect against CSRF\n    oauthStateString = \"thisshouldberandom\"\n)"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "import (\n    \"fmt\"\n    \"net/http\"\n\n    \"github.com/google/go-github/github\"\n    \"golang.org/x/oauth2\"\n    githuboauth \"golang.org/x/oauth2/github\"\n)\n\nvar (\n    // You must register the app at https://github.com/settings/applications\n    // Set callback to http://127.0.0.1:7000/github_oauth_cb\n    // Set ClientId and ClientSecret to\n    oauthConf = \u0026oauth2.Config{\n        ClientID:     \"\",\n        ClientSecret: \"\",\n        // select level of access you want https://developer.github.com/v3/oauth/#scopes\n        Scopes:       []string{\"user:email\", \"repo\"},\n        Endpoint:     githuboauth.Endpoint,\n    }\n    // random string for oauth2 API calls to protect against CSRF\n    oauthStateString = \"thisshouldberandom\"\n)",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1531203515166,
        "id": "12a9db9e-9399-4a5f-aa62-0855f1021705",
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1531203515166,
        "parent_id": "83fac1a9-a76c-49d7-9ebd-7dd9ae95fe1a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "This is your main html page:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "This is your main html page:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1531203515167,
        "id": "b11cf587-8c55-44f0-a14a-6cb21d155017",
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1531203515167,
        "parent_id": "83fac1a9-a76c-49d7-9ebd-7dd9ae95fe1a",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "const htmlIndex = `\u003chtml\u003e\u003cbody\u003e\nLogged in with \u003ca href=\"/login\"\u003eGitHub\u003c/a\u003e\n\u003c/body\u003e\u003c/html\u003e\n`\n\n// /\nfunc handleMain(w http.ResponseWriter, r *http.Request) {\n    w.Header().Set(\"Content-Type\", \"text/html; charset=utf-8\")\n    w.WriteHeader(http.StatusOK)\n    w.Write([]byte(htmlIndex))\n}"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "const htmlIndex = `\u003chtml\u003e\u003cbody\u003e\nLogged in with \u003ca href=\"/login\"\u003eGitHub\u003c/a\u003e\n\u003c/body\u003e\u003c/html\u003e\n`\n\n// /\nfunc handleMain(w http.ResponseWriter, r *http.Request) {\n    w.Header().Set(\"Content-Type\", \"text/html; charset=utf-8\")\n    w.WriteHeader(http.StatusOK)\n    w.Write([]byte(htmlIndex))\n}",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1531203515167,
        "id": "e84acef4-56c1-4fa8-a0bc-df8bc1798029",
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1531203515167,
        "parent_id": "83fac1a9-a76c-49d7-9ebd-7dd9ae95fe1a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "In the handler for /login url, redirect to GitHub’s authorization page:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "In the handler for /login url, redirect to GitHub’s authorization page:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1531203515167,
        "id": "f9eb2a82-fe74-4f7a-96aa-2a11d50ebd60",
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1531203515167,
        "parent_id": "83fac1a9-a76c-49d7-9ebd-7dd9ae95fe1a",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "// /login\nfunc handleGitHubLogin(w http.ResponseWriter, r *http.Request) {\n    url := oauthConf.AuthCodeURL(oauthStateString, oauth2.AccessTypeOnline)\n    http.Redirect(w, r, url, http.StatusTemporaryRedirect)\n}"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "// /login\nfunc handleGitHubLogin(w http.ResponseWriter, r *http.Request) {\n    url := oauthConf.AuthCodeURL(oauthStateString, oauth2.AccessTypeOnline)\n    http.Redirect(w, r, url, http.StatusTemporaryRedirect)\n}",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1531203515167,
        "id": "e20b7316-de03-42e6-93de-73164b35f5ca",
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1531203515167,
        "parent_id": "83fac1a9-a76c-49d7-9ebd-7dd9ae95fe1a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "GitHub will show authorization page to your user. If the user authorizes your app, GitHub will re-direct to OAuth callback. Here’s how you can turn it into a token, token into http client and use that client to list GitHub information about user:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "GitHub will show authorization page to your user. If the user authorizes your app, GitHub will re-direct to OAuth callback. Here’s how you can turn it into a token, token into http client and use that client to list GitHub information about user:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1531203515167,
        "id": "60da5096-ea3f-477d-9491-b5372ef21a50",
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1531203515167,
        "parent_id": "83fac1a9-a76c-49d7-9ebd-7dd9ae95fe1a",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "// /github_oauth_cb. Called by github after authorization is granted\nfunc handleGitHubCallback(w http.ResponseWriter, r *http.Request) {\n    state := r.FormValue(\"state\")\n    if state != oauthStateString {\n        fmt.Printf(\"invalid oauth state, expected '%s', got '%s'\\n\", oauthStateString, state)\n        http.Redirect(w, r, \"/\", http.StatusTemporaryRedirect)\n        return\n    }\n\n    code := r.FormValue(\"code\")\n    token, err := oauthConf.Exchange(oauth2.NoContext, code)\n    if err != nil {\n        fmt.Printf(\"oauthConf.Exchange() failed with '%s'\\n\", err)\n        http.Redirect(w, r, \"/\", http.StatusTemporaryRedirect)\n        return\n    }\n\n    oauthClient := oauthConf.Client(oauth2.NoContext, token)\n    client := github.NewClient(oauthClient)\n    user, _, err := client.Users.Get(\"\")\n    if err != nil {\n        fmt.Printf(\"client.Users.Get() faled with '%s'\\n\", err)\n        http.Redirect(w, r, \"/\", http.StatusTemporaryRedirect)\n        return\n    }\n    fmt.Printf(\"Logged in as GitHub user: %s\\n\", *user.Login)\n    http.Redirect(w, r, \"/\", http.StatusTemporaryRedirect)\n}"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "// /github_oauth_cb. Called by github after authorization is granted\nfunc handleGitHubCallback(w http.ResponseWriter, r *http.Request) {\n    state := r.FormValue(\"state\")\n    if state != oauthStateString {\n        fmt.Printf(\"invalid oauth state, expected '%s', got '%s'\\n\", oauthStateString, state)\n        http.Redirect(w, r, \"/\", http.StatusTemporaryRedirect)\n        return\n    }\n\n    code := r.FormValue(\"code\")\n    token, err := oauthConf.Exchange(oauth2.NoContext, code)\n    if err != nil {\n        fmt.Printf(\"oauthConf.Exchange() failed with '%s'\\n\", err)\n        http.Redirect(w, r, \"/\", http.StatusTemporaryRedirect)\n        return\n    }\n\n    oauthClient := oauthConf.Client(oauth2.NoContext, token)\n    client := github.NewClient(oauthClient)\n    user, _, err := client.Users.Get(\"\")\n    if err != nil {\n        fmt.Printf(\"client.Users.Get() faled with '%s'\\n\", err)\n        http.Redirect(w, r, \"/\", http.StatusTemporaryRedirect)\n        return\n    }\n    fmt.Printf(\"Logged in as GitHub user: %s\\n\", *user.Login)\n    http.Redirect(w, r, \"/\", http.StatusTemporaryRedirect)\n}",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1531203515167,
        "id": "451f82cc-c5ae-4283-835b-e5bba2628869",
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1531203515167,
        "parent_id": "83fac1a9-a76c-49d7-9ebd-7dd9ae95fe1a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "And finally this is how you tie everything together:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "And finally this is how you tie everything together:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1531203515167,
        "id": "aad85cc4-a8b8-48de-a31a-7b9b2e53cc79",
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1531203515167,
        "parent_id": "83fac1a9-a76c-49d7-9ebd-7dd9ae95fe1a",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "func main() {\n    http.HandleFunc(\"/\", handleMain)\n    http.HandleFunc(\"/login\", handleGitHubLogin)\n    http.HandleFunc(\"/github_oauth_cb\", handleGitHubCallback)\n    fmt.Print(\"Started running on http://127.0.0.1:7000\\n\")\n    fmt.Println(http.ListenAndServe(\":7000\", nil))\n}"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "func main() {\n    http.HandleFunc(\"/\", handleMain)\n    http.HandleFunc(\"/login\", handleGitHubLogin)\n    http.HandleFunc(\"/github_oauth_cb\", handleGitHubCallback)\n    fmt.Print(\"Started running on http://127.0.0.1:7000\\n\")\n    fmt.Println(http.ListenAndServe(\":7000\", nil))\n}",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1531203515167,
        "id": "ca906ecd-7a9e-4c7d-b646-b35ef294e51d",
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1531203515167,
        "parent_id": "83fac1a9-a76c-49d7-9ebd-7dd9ae95fe1a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Remembering OAuth access token"
            ]
          ]
        },
        "type": "sub_header",
        "version": 1,
        "inline_content": [
          {
            "Text": "Remembering OAuth access token"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1531203515167,
        "id": "a1a9307d-3fa2-423d-84bf-2b14a516b82b",
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1531203515167,
        "parent_id": "83fac1a9-a76c-49d7-9ebd-7dd9ae95fe1a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Once you retrieve the token, you need to remember it e.g. in a database. Here’s how to serialize/deserialize token to/from JSON:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Once you retrieve the token, you need to remember it e.g. in a database. Here’s how to serialize/deserialize token to/from JSON:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1531203515167,
        "id": "23689855-520c-4396-ab58-8cc3268ec0c1",
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1531203515167,
        "parent_id": "83fac1a9-a76c-49d7-9ebd-7dd9ae95fe1a",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "func tokenToJSON(token *oauth2.Token) (string, error) {\n    if d, err := json.Marshal(token); err != nil {\n        return \"\", err\n    } else {\n        return string(d), nil\n    }\n}\n\nfunc tokenFromJSON(jsonStr string) (*oauth2.Token, error) {\n    var token oauth2.Token\n    if err := json.Unmarshal([]byte(jsonStr), \u0026token); err != nil {\n        return nil, err\n    }\n    return \u0026token, nil\n}"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "func tokenToJSON(token *oauth2.Token) (string, error) {\n    if d, err := json.Marshal(token); err != nil {\n        return \"\", err\n    } else {\n        return string(d), nil\n    }\n}\n\nfunc tokenFromJSON(jsonStr string) (*oauth2.Token, error) {\n    var token oauth2.Token\n    if err := json.Unmarshal([]byte(jsonStr), \u0026token); err != nil {\n        return nil, err\n    }\n    return \u0026token, nil\n}",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1531203515167,
        "id": "bee2783f-2266-4005-acbe-cf9772c58daa",
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1531203515167,
        "parent_id": "83fac1a9-a76c-49d7-9ebd-7dd9ae95fe1a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Using personal access token"
            ]
          ]
        },
        "type": "sub_header",
        "version": 1,
        "inline_content": [
          {
            "Text": "Using personal access token"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1531203515167,
        "id": "b4b5a229-6a85-48a4-a508-db29e80cbce2",
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1531203515167,
        "parent_id": "83fac1a9-a76c-49d7-9ebd-7dd9ae95fe1a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "If you want to access someone else’s GitHub info, you need to authorize your app with GitHub as described above. If you want to access your own account, you can generate a "
            ],
            [
              "personal access token",
              [
                [
                  "a",
                  "https://github.com/settings/applications#personal-access-tokens"
                ]
              ]
            ],
            [
              ". Here’s how to do it:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "If you want to access someone else’s GitHub info, you need to authorize your app with GitHub as described above. If you want to access your own account, you can generate a "
          },
          {
            "Text": "personal access token",
            "Link": "https://github.com/settings/applications#personal-access-tokens"
          },
          {
            "Text": ". Here’s how to do it:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1531203515167,
        "id": "a9c02a27-bbbe-47ac-baab-f1af0cfdb615",
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1531203515167,
        "parent_id": "83fac1a9-a76c-49d7-9ebd-7dd9ae95fe1a",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "package main\n\nimport (\n    \"encoding/json\"\n    \"fmt\"\n\n    \"github.com/google/go-github/github\"\n    \"golang.org/x/oauth2\"\n)\n\nvar (\n    // you need to generate personal access token at\n    // https://github.com/settings/applications#personal-access-tokens\n    personalAccessToken = \"\"\n)\n\ntype TokenSource struct {\n    AccessToken string\n}\n\nfunc (t *TokenSource) Token() (*oauth2.Token, error) {\n    token := \u0026oauth2.Token{\n        AccessToken: t.AccessToken,\n    }\n    return token, nil\n}\n\nfunc main() {\n    tokenSource := \u0026TokenSource{\n        AccessToken: personalAccessToken,\n    }\n    oauthClient := oauth2.NewClient(oauth2.NoContext, tokenSource)\n    client := github.NewClient(oauthClient)\n    user, _, err := client.Users.Get(\"\")\n    if err != nil {\n        fmt.Printf(\"client.Users.Get() faled with '%s'\\n\", err)\n        return\n    }\n    d, err := json.MarshalIndent(user, \"\", \"  \")\n    if err != nil {\n        fmt.Printf(\"json.MarshlIndent() failed with %s\\n\", err)\n        return\n    }\n    fmt.Printf(\"User:\\n%s\\n\", string(d))\n}"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "package main\n\nimport (\n    \"encoding/json\"\n    \"fmt\"\n\n    \"github.com/google/go-github/github\"\n    \"golang.org/x/oauth2\"\n)\n\nvar (\n    // you need to generate personal access token at\n    // https://github.com/settings/applications#personal-access-tokens\n    personalAccessToken = \"\"\n)\n\ntype TokenSource struct {\n    AccessToken string\n}\n\nfunc (t *TokenSource) Token() (*oauth2.Token, error) {\n    token := \u0026oauth2.Token{\n        AccessToken: t.AccessToken,\n    }\n    return token, nil\n}\n\nfunc main() {\n    tokenSource := \u0026TokenSource{\n        AccessToken: personalAccessToken,\n    }\n    oauthClient := oauth2.NewClient(oauth2.NoContext, tokenSource)\n    client := github.NewClient(oauthClient)\n    user, _, err := client.Users.Get(\"\")\n    if err != nil {\n        fmt.Printf(\"client.Users.Get() faled with '%s'\\n\", err)\n        return\n    }\n    d, err := json.MarshalIndent(user, \"\", \"  \")\n    if err != nil {\n        fmt.Printf(\"json.MarshlIndent() failed with %s\\n\", err)\n        return\n    }\n    fmt.Printf(\"User:\\n%s\\n\", string(d))\n}",
        "code_language": "Plain Text"
      }
    ],
    "title": "Accessing GitHub API from Go",
    "format_page": {
      "page_cover": "",
      "page_cover_position": 0,
      "page_font": "",
      "page_full_width": true,
      "page_icon": "",
      "page_small_text": true
    }
  },
  "Users": [
    {
      "email": "kkowalczyk@gmail.com",
      "family_name": "Kowalczyk",
      "given_name": "Krzysztof",
      "id": "bb760e2d-d679-4b64-b2a9-03005b21870a",
      "locale": "en",
      "mobile_onboarding_completed": true,
      "onboarding_completed": true,
      "profile_photo": "https://s3-us-west-2.amazonaws.com/public.notion-static.com/2dcaa66c-7674-4ff6-9924-601785b63561/head-bw-640x960.png",
      "time_zone": "America/Los_Angeles",
      "version": 9
    }
  ],
  "Collections": null,
  "CollectionViews": null
}