<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Stats for my websites</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script>
        (function (w, d, s, g, js, fs) {
            g = w.gapi || (w.gapi = {}); g.analytics = { q: [], ready: function (f) { this.q.push(f); } };
            js = d.createElement(s); fs = d.getElementsByTagName(s)[0];
            js.src = 'https://apis.google.com/js/platform.js';
            fs.parentNode.insertBefore(js, fs); js.onload = function () { g.load('analytics'); };
        }(window, document, 'script'));
    </script>


</head>

<body>
    <div id="embed-api-auth-container"></div>
    <div id="chart-container"></div>
    <div id="view-selector-container"></div>

    <script>
        var sumatra = {
            ids: "ga:94701097",
            name: "Sumatra Website"
        };
        var blog = {
            ids: "ga:203676",
            name: "blog.kowalczyk.info"
        };
        var books = {
            ids: "ga:169042363",
            name: "programming-books.io"
        };
        var tools = {
            ids: "ga:183701063",
            name: "www.onlinetool.io"
        };
        var accounts = [sumatra, blog, books, tools];

        function appendDiv(text, id) {
            var el = document.createElement('div');
            el.textContent = text;
            if (id) {
                el.id = id;
            }
            document.body.appendChild(el);
        }

        gapi.analytics.ready(function () {
            /**
             * Authorize the user immediately if the user has already granted access.
             * If no access has been created, render an authorize button inside the
             * element with the ID "embed-api-auth-container".
             */
            gapi.analytics.auth.authorize({
                container: 'embed-api-auth-container',
                clientid: '753125233167-4e0822h5rm3e8rgavb5r259g36la6qgh.apps.googleusercontent.com'
            });

            var n = accounts.length;
            var i, acc, el;
            for (i = 0; i < n; i++) {
                acc = accounts[i];
                acc.sessId = "sess-" + i;

                appendDiv(acc.name);
                appendDiv("", acc.sessId);

                acc.sessionsChart = new gapi.analytics.googleCharts.DataChart({
                    query: {
                        metrics: 'ga:sessions',
                        ids: acc.ids,
                        dimensions: 'ga:date',
                        'start-date': '30daysAgo',
                        'end-date': 'yesterday'
                    },
                    chart: {
                        container: acc.sessId,
                        type: 'LINE',
                        options: {
                            width: 320
                        }
                    }
                });
                acc.sessionsChart.execute();
            }
        });
    </script>
</body>

</html>